<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title id='Description'>Nabbesh Reporting</title>
    <link rel="shortcut icon" href="https://s3.amazonaws.com/akiajtwy4p5byb7shnva_images/static/images/favicon.ico">

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>



    <link rel="stylesheet" href="/site_media/jqwid/jqwidgets/styles/jqx.base.css" type="text/css" />

    <link rel="stylesheet" href="/site_media/jqwid/jqwidgets/styles/jqx.bootstrap.css" type="text/css" />

    <script type="text/javascript" src="/site_media/jqwid/scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcheckbox.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxtabs.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxsplitter.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxpanel.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxnavigationbar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxprogressbar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxdatetimeinput.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxinput.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcalendar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxtooltip.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/globalization/globalize.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxslider.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcombobox.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxexpander.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcalendar.js"></script>
    <script type="text/javascript" src="/site_media/js/jquery.blockUI.js"></script>

    <script type="text/javascript">

    function PrintElem(elem)
    {
        Popup($(elem).html());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'my div', 'height=800,width=1024');
        mywindow.document.write('<html><head><title>my div</title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');

        mywindow.print();
        mywindow.close();

        return true;
    }

</script>
  
    <script type="text/javascript">
        // Load the Visualization API and the piechart package.
        google.load('visualization', '1.0', {
            'packages': ['corechart']
        });
        google.load('visualization', '1', {packages: ['table']});
        google.load('visualization', '1', {packages: ['geochart']});
        google.load('visualization', '1', {packages: ['annotatedtimeline']});
        google.load('visualization', '1', {packages: ['controls']});
        google.load('visualization', '1', {packages: ['geochart']});
                google.load('visualization', '1', {packages: ['geomap']});

    </script>
 
 
    
    <script type="text/javascript">
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            var theme = 'bootstrap';
            //Creating jqxTabs
            $('#jqxTabs').jqxTabs({
                width: '100%',
                height: getDocHeight()-135,
                position: 'top',
                theme: theme,
                
            });
            $('#jqxTabs').jqxTabs({
                animationType: 'fade'
            });
            $('#jqxTabs').jqxTabs({
                selectionTracker: true
            });


            var freelancerssource = ["Demography","Gender Distribution","Age Distribution", "Top Freelancers"];

            $("#freelancerslist").jqxListBox({
                
                source: freelancerssource,
                width: 176,
                height: 110,
                selectedIndex: -1,
                theme: theme
            });
            $('#freelancerslist').on('select', function (event) {
                var args = event.args;
                var item = $('#freelancerslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#freelancerslist").jqxListBox({selectedIndex: -1 }); 
                }
            });



	    var employersssource = ["Top Employers"];

            $("#employerslist").jqxListBox({
                
                source: employersssource,
                width: 176,
                height: 30,
                selectedIndex: -1,
                theme: theme
            });
            $('#employerslist').on('select', function (event) {
                var args = event.args;
                var item = $('#employerslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#employerslist").jqxListBox({selectedIndex: -1 }); 
                }
            });



	var skillssource = ["Skills Demography"];

            $("#skillslist").jqxListBox({
                
                source: skillssource,
                width: 176,
                height: 30,
                selectedIndex: -1,
                theme: theme
            });
            $('#skillslist').on('select', function (event) {
                var args = event.args;
                var item = $('#skillslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#skillslist").jqxListBox({selectedIndex: -1 }); 
                }
            });


            var dashboardssource = [
                "Main Dashboard"
            ];

            $("#dashboardslist").jqxListBox({
                
                source: dashboardssource,
                width: 176,
                height: 30,
                selectedIndex: -1,
                theme: theme
            });
            $('#dashboardslist').on('select', function (event) {
                var args = event.args;
                var item = $('#dashboardslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#dashboardslist").jqxListBox({selectedIndex: -1 }); 
                }
            });
            
            
            var activitysource = ["Employers & Jobs Stats", "Jobs & Applications Stats", "Employers Funnel", "Freelancers Funnel"];

            $("#activitylist").jqxListBox({
                
                source: activitysource,
                width: 176,
                height: 110,
                selectedIndex: -1,
                theme: theme
            });
            $('#activitylist').on('select', function (event) {
                var args = event.args;
                var item = $('#activitylist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#activitylist").jqxListBox({selectedIndex: -1 }); 
                }
            });

            $('#mainSplitter').jqxSplitter({
                width: '100%',
                height: '680',
                theme: theme,
                resizable: false,
                panels: [{
                    size: 180
                }, {
                    size: 600
                }]
            });


	    

            $("#jqxNavigationBar").jqxNavigationBar({
                width: 178,
                height: '100%',
                expandMode: 'toggle',
                expandedIndexes: [0],
                theme: theme
            });
		

	    sendrequest('Main Dashboard','');
        });
    </script>



    <script type="text/javascript">
        $(document).ajaxStart(function () {
            //$("#wait").css("display","block"); 
            //$("#loadmapButton").jqxButton({ disabled: true }); 
 
            $.blockUI({ message: '<h2>Just a moment!</h2>',  css: { 
            border: 'none', 
            padding: '15px', 
            backgroundColor: '#000', 
            '-webkit-border-radius': '10px', 
            '-moz-border-radius': '10px', 
            opacity: 0.7, 
            color: '#fff' 
        } }); 
            
        });
        $(document).ajaxComplete(function () {
            //$("#wait").css("display","none"); 
            //$("#loadmapButton").jqxButton({ disabled: false }); 
          //$('#mainSplitter').jqxSplitter({ disabled: false });
          $.unblockUI();
         
        });
	function getDocHeight() {
    		var D = document;
    		return Math.max(
       		 D.body.scrollHeight, D.documentElement.scrollHeight,
        	 D.body.offsetHeight, D.documentElement.offsetHeight,
	         D.body.clientHeight, D.documentElement.clientHeight
	    );
	}
        function sendrequest(reportname,param) {        
            container = document.getElementById('reportcontent');
            var URLString = new String("");
            var params = {"param": param};
            switch(reportname)
		{
			case "Demography": 
  				URLString ="freelancerdemography_report";
 				break;
			case "Gender Distribution":
  				URLString = "freelancersgender_report";
  				break;
  			case "Age Distribution":
  				URLString = "freelancersages_report";
  				break;
  			case "Main Dashboard":
  				URLString = "dashboard";
  				break;
			case "Employers & Jobs Stats":
  				URLString = "jobs_employers_statistics";
  				break;  
			case "Jobs & Applications Stats":
  				URLString = "jobs_applications_statistics";
  				break;  		
  			case "Employers Funnel":
  				URLString = "sign_job_proposal_invoice";
  				break;
  			case "Freelancers Funnel":
  				URLString = "sign_application_proposal_invoice";
  				break;
  		        case "Top Freelancers":
  		                URLString = "top_freelancers";
  				break;
		        case "Top Employers":
  		                URLString = "top_employers";
  				break;
  			case "Skills Demography":
  				URLString = "skillsdemography_report"	
  				break;
			default:
  			      URLString = "dashboard";
		}
            $.ajax({
                url: URLString,
                type: 'POST',
                data: JSON.stringify(params),
                success: function (r) {
                    $('#reportcontent').html(r);
                    $('#jqxTabs').jqxTabs({height: getDocHeight()-135});
                    
                   
                    //$('#mainSplitter').jqxSplitter({height: '800'});
                       
                   $('#mainSplitter').jqxSplitter({height: $('#jqxTabs').jqxTabs('height')-70});
                   
                   
                }
            });

        }
    </script>


</head>
