<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title id='Description'>Nabbesh Reporting</title>
    <link rel="shortcut icon" href="https://s3.amazonaws.com/akiajtwy4p5byb7shnva_images/static/images/favicon.ico">

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>


    <link rel="stylesheet" href="/site_media/css/demos.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/site_media/jqwid/jqwidgets/styles/jqx.base.css" type="text/css" />

    <link rel="stylesheet" href="/site_media/jqwid/jqwidgets/styles/jqx.bootstrap.css" type="text/css" />

    <script type="text/javascript" src="/site_media/jqwid/scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcheckbox.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxtabs.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxsplitter.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxpanel.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxnavigationbar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxprogressbar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxdatetimeinput.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxinput.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcalendar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxtooltip.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/globalization/globalize.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxslider.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcombobox.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxexpander.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxcalendar.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="/site_media/js/jquery.blockUI.js"></script>
    
    
    
       
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxgrid.columnsresize.js"></script>
    <script type="text/javascript" src="/site_media/jqwid/jqwidgets/jqxgrid.sort.js"></script> 

    
    <script src="/site_media/js/rgraph/RGraph.common.core.js" ></script>
    <script src="/site_media/js/rgraph/RGraph.funnel.js" ></script>
    
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    
    
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

    <script type="text/javascript">

    function PrintElem(elem)
    {
        Popup($(elem).html());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'my div', 'height=800,width=1024');
        mywindow.document.write('<html><head><title>my div</title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');

        mywindow.print();
        mywindow.close();

        return true;
    }

</script>
  
    <script type="text/javascript">
        // Load the Visualization API and the piechart package.
        google.load('visualization', '1.0', {
            'packages': ['corechart']
        });
        google.load('visualization', '1', {packages: ['table']});
        google.load('visualization', '1', {packages: ['geochart']});
        google.load('visualization', '1', {packages: ['annotatedtimeline']});
        google.load('visualization', '1', {packages: ['controls']});
        google.load('visualization', '1', {packages: ['geochart']});
        google.load('visualization', '1', {packages: ['geomap']});


    </script>
    <script type="text/javascript" src="//www.google.com/jsapi"></script> 
    
    <script type="text/javascript">
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            var theme = 'bootstrap';
            //Creating jqxTabs
            $('#jqxTabs').jqxTabs({
                width: '100%',
                height: getDocHeight()-135,
                position: 'top',
                theme: theme,
                
            });
            $('#jqxTabs').jqxTabs({
                animationType: 'fade'
            });
            $('#jqxTabs').jqxTabs({
                selectionTracker: true
            });


            var freelancerssource = ["Demographic Profile","Gender Distribution","Age Distribution","Education", "Top Freelancers"];

            $("#freelancerslist").jqxListBox({
                
                source: freelancerssource,
                width: 176,
                height: 135,
                selectedIndex: -1,
                theme: theme
            });
            $('#freelancerslist').on('select', function (event) {
                var args = event.args;
                var item = $('#freelancerslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#freelancerslist").jqxListBox({selectedIndex: -1 }); 
                }
            });



	    var employersssource = ["Top Employers"];

            $("#employerslist").jqxListBox({
                
                source: employersssource,
                width: 176,
                height: 30,
                selectedIndex: -1,
                theme: theme
            });
            $('#employerslist').on('select', function (event) {
                var args = event.args;
                var item = $('#employerslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#employerslist").jqxListBox({selectedIndex: -1 }); 
                }
            });



	var skillssource = ["Skills Demographic Profile", "Skills Distribution"];

            $("#skillslist").jqxListBox({
                
                source: skillssource,
                width: 176,
                height: 55,
                selectedIndex: -1,
                theme: theme
            });
            $('#skillslist').on('select', function (event) {
                var args = event.args;
                var item = $('#skillslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#skillslist").jqxListBox({selectedIndex: -1 }); 
                }
            });

	    var financesource = ["Proposals", "Invoices"];

            $("#financelist").jqxListBox({
                
                source: financesource,
                width: 176,
                height: 55,
                selectedIndex: -1,
                theme: theme
            });
            $('#financelist').on('select', function (event) {
                var args = event.args;
                var item = $('#financelist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#financelist").jqxListBox({selectedIndex: -1 }); 
                }
            });


            var dashboardssource = [
                "Main Dashboard"
            ];

            $("#dashboardslist").jqxListBox({
                
                source: dashboardssource,
                width: 176,
                height: 30,
                selectedIndex: -1,
                theme: theme
            });
            $('#dashboardslist').on('select', function (event) {
                var args = event.args;
                var item = $('#dashboardslist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#dashboardslist").jqxListBox({selectedIndex: -1 }); 
                }
            });
            
            
            var activitysource = ["Employers & Jobs Stats", "Jobs/Applications Tracking", "Employers Funnel", "Freelancers Funnel", "Cross-Country Apps", "Jobs & Apps Stats", "Signups/Apps Retention", "Signups/Jobs Retention"];

            $("#activitylist").jqxListBox({
                
                source: activitysource,
                width: 176,
                height: 210,
                selectedIndex: -1,
                theme: theme
            });
            $('#activitylist').on('select', function (event) {
                var args = event.args;
                var item = $('#activitylist').jqxListBox('getItem', args.index);
                if (item != null) {
                    
                    sendrequest(item.label,'');
                    $("#activitylist").jqxListBox({selectedIndex: -1 }); 
                }
            });

            $('#mainSplitter').jqxSplitter({
                width: '100%',
                height: '680',
                theme: theme,
                resizable: false,
                panels: [{
                    size: 180
                }, {
                    size: 600
                }]
            });


	    

            $("#jqxNavigationBar").jqxNavigationBar({
                width: 178,
                height: '100%',
                expandMode: 'multiple',
                expandedIndexes: [0],
                theme: theme
            });
		

	    sendrequest('Main Dashboard','');
        });
    </script>



    <script type="text/javascript">
        $(document).ajaxStart(function () { 
            $.blockUI({ message: "<h2>Just a moment!</h2>",  css: { 
            border: 'none', 
            padding: '15px', 
            backgroundColor: '#000', 
            '-webkit-border-radius': '10px', 
            '-moz-border-radius': '10px', 
            opacity: 0.7, 
            color: '#fff' 
        } }); 
            
        });
        $(document).ajaxComplete(function () {
            //$("#wait").css("display","none"); 
            //$("#loadmapButton").jqxButton({ disabled: false }); 
          //$('#mainSplitter').jqxSplitter({ disabled: false });
          $.unblockUI();
         
        });
	function getDocHeight() {
    		var D = document;
    		return Math.max(
       		 D.body.scrollHeight, D.documentElement.scrollHeight,
        	 D.body.offsetHeight, D.documentElement.offsetHeight,
	         D.body.clientHeight, D.documentElement.clientHeight
	    );
	}
        function sendrequest(reportname,param) {        
            container = document.getElementById('reportcontent');
            var URLString = new String("");
            var params = {"param": param};
            switch(reportname)
		{
			case "Demographic Profile": 
  				URLString ="freelancerdemography_report";
 				break;
			case "Gender Distribution":
  				URLString = "freelancersgender_report";
  				break;
  			case "Age Distribution":
  				URLString = "freelancersages_report";
  				break;
  			case "Education":
  				URLString = "freelancerseducation_report";
  				break;	
  			case "Main Dashboard":
  				URLString = "dashboard";
  				break;
			case "Employers & Jobs Stats":
  				URLString = "jobs_employers_statistics";
  				break;  
			case "Jobs/Applications Tracking":
  				URLString = "jobs_applications_statistics";
  				break;  		
  			case "Employers Funnel":
  				URLString = "sign_job_proposal_invoice";
  				break;
  			case "Freelancers Funnel":
  				URLString = "sign_application_proposal_invoice";
  				break;
  		        case "Top Freelancers":
  		                URLString = "top_freelancers";
  				break;
		        case "Top Employers":
  		                URLString = "top_employers";
  				break;
  			case "Skills Demographic Profile":
  				URLString = "skillsdemography_report";	
  				break;
  			case "Cross-Country Apps":
  				URLString = "crosscountryapps_report";	
  				break;
  			case "Proposals":
  				URLString = "proposals_report";	
  				break;
  			case "Invoices":
  				URLString = "invoices_report";	
  				break;
  			case "Escrow":
  				URLString = "escrow_report";	
  				break;	
  			case "Skills Distribution":
  			      URLString = "skillsdistribution_report";	
  		   	      break;	
  		   	case "Jobs & Apps Stats":
  		   	      URLString = "jobs_apps_stats_report";  
  		   	      break;  		   	      
  		   	case "Signups/Apps Retention":  		   	      
  		   	      URLString = "signups_apps_retention_report";
  		   	      break;
  		   	case "Signups/Jobs Retention":    			
  		   	      URLString = "signups_jobs_retention_report";
  		   	      break;
			default:
  			      URLString = "dashboard";
		}
            $.ajax({
                url: URLString,
                type: 'POST',
                data: JSON.stringify(params),
                success: function (r) {
                    $('#reportcontent').html(r);
                    $('#jqxTabs').jqxTabs({height: getDocHeight()-135});
                                                                             
                    //$('#mainSplitter').jqxSplitter({height: '800'});
                       
                   $('#mainSplitter').jqxSplitter({height: $('#jqxTabs').jqxTabs('height')-70});
                   
                   
                }
            });

        }
        
        function JSON2CSV(objArray) {
    		var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

   		 var str = '';
   		 var line = '';

    		if ($("#labels").is(':checked')) {
    		    var head = array[0];
    		    if ($("#quote").is(':checked')) {
        		    for (var index in array[0]) {
           		     var value = index + "";
           		     line += '"' + value.replace(/"/g, '""') + '",';
         		   }
       		 } else {
      		      for (var index in array[0]) {
		        line += index + ',';
			    }
    		   }

    		    line = line.slice(0, -1);
   		     str += line + '\r\n';
 		   }
	
   		 for (var i = 0; i < array.length; i++) {
    		    var line = '';

     		   if ($("#quote").is(':checked')) {
       		     for (var index in array[i]) {
        		        var value = array[i][index] + "";
           		     line += '"' + value.replace(/"/g, '""') + '",';
        		    }
      		  } else {
        		    for (var index in array[i]) {
        		        line += array[i][index] + ',';
           		 }
       		 }
       		 line = line.slice(0, -1);
        		str += line + '\r\n';
   		 }
   		 return str;    
		}
		
		function downloadWithName(uri, name) {
   			 function eventFire(el, etype){
       		 if (el.fireEvent) {
         		   (el.fireEvent('on' + etype));
       		 } else {
        		    var evObj = document.createEvent('Events');
        		    evObj.initEvent(etype, true, false);
         		   el.dispatchEvent(evObj);
       			 }
   		 }

    		var link = document.createElement("a");
   		 link.download = name;
		    link.href = uri;
		    eventFire(link, "click");
		}
    </script>


</head>
