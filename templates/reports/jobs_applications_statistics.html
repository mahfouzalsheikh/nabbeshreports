<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
 var theme = 'bootstrap';
 $("#optionsExpander").jqxExpander({ width: '100%', theme: theme,  expanded: false});
 //$("#dateRange").jqxCalendar({ width: 220, height: 220,  selectionMode: 'range' });
 
</script>

<script type="text/javascript">

 
     
     
     var today = new Date(Date.now());
     $("#fromdate").jqxDateTimeInput({width: '200px', height: '25px', theme: theme, formatString: "yyyy-MM-dd",value: new Date(new Date(today).setMonth(today.getMonth()-1))});
     $("#todate").jqxDateTimeInput({width: '200px', height: '25px', theme: theme, formatString: "yyyy-MM-dd",value: today });

     
     $("#fromdate").on('change', function (event) {
                    fromdate= $('#fromdate').jqxDateTimeInput('getText'); 
                });
     $("#todate").on('change', function (event) {
                    todate= $('#todate').jqxDateTimeInput('getText'); 
                });        
        
      $("#searchkeywordsfield").jqxInput({placeHolder: "Keywords", height: 25, width: 200, minLength: 1});          
                
      $("#filterButton").jqxButton({ width: '200'});
      $("#filterButton").on('click', function () {                          
                  drawChart(fromdate,todate,searchkeywords);

                });
     var fromdate = $('#fromdate').jqxDateTimeInput('getText');
     var todate = $('#todate').jqxDateTimeInput('getText');
     var searchkeywords= $('#searchkeywordsfield').val();
     
     
     function drawChart(from,to,searchkeywords) {
      searchkeywords= $('#searchkeywordsfield').val();
      var params = {"fromdate": from, "todate": to, "searchkeywords": searchkeywords};
      var jsonData = $.ajax({
          url: "jobs_applications_statistics_getdata",
          dataType:"json",
          type: "POST",
          data: JSON.stringify(params),
          async: false
          }).responseText;
	
      
      if(jsonData.length <138){
        alert('Hoot! No results for your search');
      }
      else
      {
      
      var data = new google.visualization.arrayToDataTable($.parseJSON(jsonData));
	          
      
      var dataView = new google.visualization.DataView(data);
      
      
      var formatter = new google.visualization.ColorFormat();
      formatter.addRange(0, 1, '#000000', '#ffecff');
      formatter.addRange(1, 1000, '#000000', '#3DAA58');
      formatter.format(data, 6); 
      
      var formatter1 = new google.visualization.ColorFormat();
      formatter1.addRange(0, 1, '#000000', '#ffecff');
      formatter1.addRange(1, 1000, '#000000', '#3DAA95');
      formatter1.format(data, 7); 
      
      var formatter2 = new google.visualization.PatternFormat('<a href="http://www.nabbesh.com/admin/contracts/job/{0}"  target="_blank">{0}</a>');
      formatter2.format(data, [2],2);
      
     	
      
      var tablearea = new google.visualization.Table(document.getElementById('tablearea'));
      
       
      var options = {'showRowNumber': true, allowHtml: true};
      options['page'] = 'enable';
      options['pageSize'] = 10;
      options['pagingSymbols'] = {prev: 'prev', next: 'next'};
      options['pagingButtonsConfiguration'] = 'auto';
      
      tablearea.draw(data,{allowHtml: true});
      
     }
      // Apply formatter to second column
    }
    
     
  
    drawChart(fromdate,todate, searchkeywords);
</script>

 <div id='optionsExpander'>
            <div>Options</div>
            <div>
                <table>

                   <tr><td>From:</td><td><div style='margin-top: 10px; font-size: 13px; font-family: Verdana;' id='fromdate'></div></td></tr>
                   <tr><td>To:</td><td><div style='margin-top: 10px; font-size: 13px; font-family: Verdana;' id='todate'></div></td></tr> 
                   <tr><td>Search:</td><td><input type="text" id="searchkeywordsfield"/></td></tr>
                   <tr><td></td><td><div><input type="button" value="Filter Results" id='filterButton' /></div></td></tr>                                     
                </table>   
            </div>
        </div>
<div style="padding: 20px 20px 20px 20px">
<div id="tablearea" style="width: 100%; height:100%; float: left;"></div>

</div>


