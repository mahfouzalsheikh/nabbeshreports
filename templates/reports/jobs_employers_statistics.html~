<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
 var theme = 'bootstrap';
 $("#optionsExpander").jqxExpander({ width: '100%', theme: theme,  expanded: false});
 //$("#dateRange").jqxCalendar({ width: 220, height: 220,  selectionMode: 'range' });
 
</script>

<script type="text/javascript">

      $('#limitmenu').on('select', function (event) {
                    var args = event.args;
                    if (args != undefined) {
                        var item = event.args.item;
                        if (item != null) {
                            //drawChart(item.label);
                            limit=item.label
                        }
                    }
                });
      
     var source = ["Month","Day"];
       
     $("#limitmenu").jqxComboBox({ source: source, width: '100px', height: '25px', selectedIndex:1});     
     
     var today = new Date(Date.now());
     $("#fromdate").jqxDateTimeInput({width: '200', height: '25px', theme: theme, formatString: "yyyy-MM-dd",value: new Date(new Date(today).setMonth(today.getMonth()-1))});
     $("#todate").jqxDateTimeInput({width: '200', height: '25px', theme: theme, formatString: "yyyy-MM-dd",value: today });

     
     $("#fromdate").on('change', function (event) {
                    fromdate= $('#fromdate').jqxDateTimeInput('getText'); 
                });
     $("#todate").on('change', function (event) {
                    todate= $('#todate').jqxDateTimeInput('getText'); 
                });        
        
                
                
      $("#filterButton").jqxButton({ width: '200'});
      $("#filterButton").on('click', function () {                          
                  drawChart(limit,fromdate,todate);

                });
     var fromdate = $('#fromdate').jqxDateTimeInput('getText');
     var todate = $('#todate').jqxDateTimeInput('getText');
     var limit="Day";
     
     
     
     function drawChart(limit,from,to) {
      var params = {"limit": limit, "fromdate": from, "todate": to};
      var jsonData = $.ajax({
          url: "jobs_employers_statistics_getdata",
          dataType:"json",
          type: "POST",
          data: JSON.stringify(params),
          async: false
          }).responseText;
	
	//alert(jsonData);
      var data = new google.visualization.arrayToDataTable($.parseJSON(jsonData));
	
      var chart = new google.visualization.LineChart(document.getElementById('visualization'));
      
      var dataView = new google.visualization.DataView(data);
      
      
       
      
      chart.draw(dataView, {curveType: "function",width: '100%', height: 600, is3D: true,title:"Jobs Posted Per Employer"});
      
      //var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard')).bind(categoryPicker, chart).draw(dataView);	
      
      var tablearea = new google.visualization.Table(document.getElementById('tablearea'));
      
      
      tablearea.draw(data,{allowHtml: true});
      
   
      // Apply formatter to second column
    }
    
     
       
    drawChart(limit,fromdate,todate);
</script>



<div style="background-color: #eee; height:70px">
<div><img src="http://www.nabbesh.com/static/images/nabbesh_logo.png"></div></div>
 <div id='optionsExpander'>
            <div>Options</div>
            <div>
                <ul>
                    <div id="limitmenu">Limit:</div>     
                    <div style='margin-top: 10px; font-size: 13px; font-family: Verdana;' id='fromdate'></div>
                    <div style='margin-top: 10px; font-size: 13px; font-family: Verdana;' id='todate'></div>
                    <div><input type="button" value="Filter Results" id='filterButton' /></div>  
                    <div id="dashboard">
      <table>
        <tr style='vertical-align: top'>
          <td style='width: 300px; font-size: 0.9em;'>
            <div id="dashboardcontrols"></div>
            <div id="control2"></div>
            <div id="control3"></div>
          </td>
          <td style='width: 600px'>
            <div style="float: left;" id="chart1"></div>
            <div style="float: left;" id="chart2"></div>
            <div style="float: left;" id="chart3"></div>
          </td>
        </tr>
      </table>
    </div>
                </ul>
            </div>
        </div>
<div style="padding: 20px 20px 20px 20px">
<div id="visualization" style="width: 100%; height:600px; float: left;"></div>
<div id="tablearea" style="width: 100%; height:100%; float: left;"></div>
</div>


