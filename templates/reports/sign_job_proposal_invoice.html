<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
 var theme = 'bootstrap';
 $("#optionsExpander").jqxExpander({ width: '100%', theme: theme,  expanded: false});
 //$("#dateRange").jqxCalendar({ width: 220, height: 220,  selectionMode: 'range' });
 
</script>

<script type="text/javascript">

 
     
     
     var today = new Date(Date.now());
     $("#fromdate").jqxDateTimeInput({width: '200px', height: '25px', theme: theme, formatString: "yyyy-MM-dd",value: new Date(new Date(today).setMonth(today.getMonth()-1))});
     $("#todate").jqxDateTimeInput({width: '200px', height: '25px', theme: theme, formatString: "yyyy-MM-dd",value: today });

     
     $("#fromdate").on('change', function (event) {
                    fromdate= $('#fromdate').jqxDateTimeInput('getText'); 
                });
     $("#todate").on('change', function (event) {
                    todate= $('#todate').jqxDateTimeInput('getText'); 
                });        
        
      
                
      $("#filterButton").jqxButton({ width: '200'});
      $("#filterButton").on('click', function () {                          
                  drawChart(fromdate,todate);

                });
     var fromdate = $('#fromdate').jqxDateTimeInput('getText');
     var todate = $('#todate').jqxDateTimeInput('getText');
     
     
     
     function drawChart(from,to) {
      
      var params = {"fromdate": from, "todate": to};
      var jsonData = $.ajax({
          url: "sign_job_proposal_invoice_getdata",
          dataType:"json",
          type: "POST",
          data: JSON.stringify(params),
          async: false
          }).responseText;
	
      
      obj= $.parseJSON(jsonData);
      
      signedup=obj[0];
      postedjob=obj[1];
      paidproposal=obj[2];
      paidinvoice=obj[3];      
      
      stage1=(parseFloat(postedjob) / parseFloat(signedup)*100).toFixed(2) + '%';
      stage2=(parseFloat(paidproposal) / parseFloat(postedjob)*100).toFixed(2) + '%';
      stage3=(parseFloat(paidinvoice) / parseFloat(paidproposal)*100).toFixed(2) + '%';
      
      $('#stage1').html(stage1);
      $('#stage2').html(stage2);
      $('#stage3').html(stage3);
      //var data = new google.visualization.arrayToDataTable($.parseJSON(jsonData));
	          
      var period = '';
      
      var data1 = google.visualization.arrayToDataTable([[period, 'Signed Up'],[period,  signedup]]);
      var data2 = google.visualization.arrayToDataTable([[period, 'Posted a Job'],[period,  postedjob]]);
      var data3 = google.visualization.arrayToDataTable([[period, 'Paid a Proposal'],[period,  paidproposal]]);
      var data4 = google.visualization.arrayToDataTable([[period, 'Paid an Invoic'],[period,  paidinvoice]]);
      

      
      var chart1 = new google.visualization.ColumnChart(document.getElementById('chart1'));         
      chart1.draw(data1, {title:"Signed Up",width: 230, height: 700, vAxis: {maxValue: 10000}});

      var chart2 = new google.visualization.ColumnChart(document.getElementById('chart2'));         
      chart2.draw(data2, {title:"Posted a Job",width: 230, height: 700, vAxis: {maxValue: signedup}});

      var chart3 = new google.visualization.ColumnChart(document.getElementById('chart3'));         
      chart3.draw(data3, {title:"Paid a Proposal",width: 230, height: 700, vAxis: {maxValue: postedjob}});

      var chart4 = new google.visualization.ColumnChart(document.getElementById('chart4'));         
      chart4.draw(data4, {title:"Paid an Invoice",width: 230, height: 700, vAxis: {maxValue: paidinvoice}});
    
      // Apply formatter to second column
    }
    
     
  
    drawChart(fromdate,todate);
</script>

 <div id='optionsExpander'>
            <div>Options</div>
            <div>
                <table>

                   <tr><td>From:</td><td><div style='margin-top: 10px; font-size: 13px; font-family: Verdana;' id='fromdate'></div></td></tr>
                   <tr><td>To:</td><td><div style='margin-top: 10px; font-size: 13px; font-family: Verdana;' id='todate'></div></td></tr>                  
                   <tr><td></td><td><div><input type="button" value="Filter Results" id='filterButton' /></div></td></tr>                                     
                </table>   
            </div>
        </div>
<div style="padding: 20px 20px 20px 20px">
<table><tr>
<td><div id="chart1" style="width: 230; height:800px; float: left;"></div></td>
<td style="text-align: center;background:url(https://s3-us-west-2.amazonaws.com/nabbeshscripts/arrow.png) no-repeat;background-position:center;" width="80"><div id="stage1"></div></td>
<td><div id="chart2" style="width: 230; height:800px; float: left;"></div></td>
<td style="text-align: center;background:url(https://s3-us-west-2.amazonaws.com/nabbeshscripts/arrow.png) no-repeat;background-position:center;" width="80"><div id="stage2"></div></td>
<td><div id="chart3" style="width: 230; height:800px; float: left;"></div></td>
<td style="text-align: center;background:url(https://s3-us-west-2.amazonaws.com/nabbeshscripts/arrow.png) no-repeat;background-position:center;" width="80"><div id="stage3"></div></td>
<td><div id="chart4" style="width: 230; height:800px; float: left;"></div></td><td></td>
</tr></table>

<div id="tablearea" style="width: 100%; height:100%; float: left;"></div>
</div>


